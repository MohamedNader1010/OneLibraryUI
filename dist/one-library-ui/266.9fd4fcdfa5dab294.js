"use strict";(self.webpackChunkOneLibraryUI=self.webpackChunkOneLibraryUI||[]).push([[266],{1266:(S,d,n)=>{n.r(d),n.d(d,{TransactionComponent:()=>u});var i=n(4006),s=n(5412),m=n(4004);function c(a,e){return r=>a.GetById(e).pipe((0,m.U)(o=>o.body.rest<r.value?{exceed:!0,value:o.body.rest}:null))}var t=n(4650),f=n(9198),p=n(7185),g=n(1390),h=n(6895),l=n(9549),v=n(4144),b=n(4859),T=n(9383);function Z(a,e){1&a&&(t.TgZ(0,"mat-error"),t._uU(1,"\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u062f\u0641\u0648\u0639 \u0645\u0637\u0644\u0648\u0628"),t.qZA())}function x(a,e){if(1&a&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&a){const r=t.oxw();t.xp6(1),t.hij(" \u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u062f\u0641\u0648\u0639 < \u0627\u0648 = ",null==r.paid.errors?null:r.paid.errors.value," ")}}class u{constructor(e,r,o,y,C,I,A){this.dialogRef=e,this.data=r,this._order=o,this.toastr=y,this.route=C,this.dialog=I,this.fb=A,this.subscriptions=[],this.isSubmitting=!1,this.ngOnDestroy=()=>this.subscriptions.forEach(F=>F.unsubscribe()),this.Form=this.fb.group({id:[0],orderId:[0,[i.kI.required]],paid:["",[i.kI.required],[c(this._order,this.data.id)]]}),this.data&&this.orderId.setValue(this.data.id)}get id(){return this.Form.get("id")}get orderId(){return this.Form.get("orderId")}get paid(){return this.Form.get("paid")}onNoClick(){this.dialogRef.close()}handleSubmit(){this.Form.valid&&(this.isSubmitting=!0,this.add())}add(){this.subscriptions.push(this._order.addOrderTransaction(this.Form.value).subscribe({next:e=>{this._order.dialogData=e.body,this.dialogRef.close({data:e})},error:e=>{this.isSubmitting=!1,this.toastr.error((e.error??e).message)},complete:()=>{this.isSubmitting=!1}}))}}u.\u0275fac=function(e){return new(e||u)(t.Y36(s.so),t.Y36(s.WI),t.Y36(f.p),t.Y36(p._W),t.Y36(g.gz),t.Y36(s.uw),t.Y36(i.qu))},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-transaction"]],decls:25,vars:13,consts:[[1,"container"],[1,"w-100","text-center","mt-3"],[1,"d-flex","flex-column",3,"formGroup","ngSubmit"],[1,"row"],["appearance","fill","color","warn",1,"w-100"],["type","text","matInput","","formControlName","orderId","readonly",""],["id","paid","matInput","","type","number","formControlName","paid"],[4,"ngIf"],[1,"my-2","d-flex","flex-row-reverse"],["mat-raised-button","","color","warn",1,"mx-2","px-4",3,"disabled"],["type","button","mat-stroked-button","","color","warn",3,"click"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"mat-dialog-content")(5,"form",2),t.NdJ("ngSubmit",function(){return r.handleSubmit()}),t.TgZ(6,"div",3)(7,"mat-form-field",4)(8,"mat-label"),t._uU(9,"\u0631\u0642\u0645 \u0627\u0644\u0637\u0644\u0628"),t.qZA(),t._UZ(10,"input",5),t.qZA()(),t.TgZ(11,"div",3)(12,"mat-form-field",4)(13,"mat-label"),t._uU(14,"\u0627\u0644\u0645\u062f\u0641\u0648\u0639"),t.qZA(),t._UZ(15,"input",6),t.YNc(16,Z,2,0,"mat-error",7),t.YNc(17,x,2,1,"mat-error",7),t.qZA()(),t.TgZ(18,"div",8)(19,"button",9),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"button",10),t.NdJ("click",function(){return r.onNoClick()}),t._uU(23),t.ALo(24,"translate"),t.qZA()()()()()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,7,"order.transaction")),t.xp6(3),t.Q6J("formGroup",r.Form),t.xp6(11),t.Q6J("ngIf",null==r.paid.errors?null:r.paid.errors.required),t.xp6(1),t.Q6J("ngIf",r.paid.hasError("exceed")),t.xp6(2),t.Q6J("disabled",!r.Form.valid||r.isSubmitting),t.xp6(1),t.Oqu(r.isSubmitting?"button.wait":t.lcZ(21,9,"button.save")),t.xp6(3),t.Oqu(t.lcZ(24,11,"button.back")))},dependencies:[i._Y,i.Fj,i.wV,i.JJ,i.JL,i.sg,i.u,h.O5,s.xY,l.KE,l.hX,l.TO,v.Nt,b.lW,T.X$],styles:["mat-card[_ngcontent-%COMP%]{width:20%}[_nghost-%COMP%]{height:100%;display:flex;justify-content:center;vertical-align:middle;align-items:center}  datepicker-value-example .mat-form-field-label{color:#f84bb3}  .mat-datepicker-toggle{color:#fad}  .mat-form-field-underline{color:#fad}"]})}}]);