"use strict";(self.webpackChunkOneLibraryUI=self.webpackChunkOneLibraryUI||[]).push([[592],{532:(D,g,r)=>{r.d(g,{G:()=>a});var e=r(4006),t=r(4650),p=r(1390),C=r(5412),A=r(2746),_=r(7185),h=r(9943),i=r(6895),m=r(9549),f=r(7392),O=r(4144),l=r(3546),E=r(4859);function c(u,s){1&u&&(t.TgZ(0,"mat-error"),t._uU(1,"\u064a\u062c\u0628 \u0627\u062f\u062e\u0627\u0644 \u0623\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645 "),t.qZA())}function d(u,s){if(1&u&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&u){const o=t.oxw();t.xp6(1),t.hij(" password must be greater than ",null==o.password.errors||null==o.password.errors.minlength?null:o.password.errors.minlength.requiredLength," character ")}}function n(u,s){1&u&&(t.TgZ(0,"mat-error"),t._uU(1," Password is "),t.TgZ(2,"strong"),t._uU(3,"required"),t.qZA()())}class a{constructor(s,o,P,T,v,M,I){this.router=s,this.dialog=o,this.route=P,this._login=T,this.fb=v,this.toastr=M,this._attendance=I,this.subscriptions=[],this.hide=!0,this.logging=!1,this.returnUrl="",this.loginForm=this.fb.group({userName:["",[e.kI.required,e.kI.maxLength(100)]],password:["",[e.kI.required,e.kI.minLength(6),e.kI.maxLength(100)]]})}ngOnInit(){this.dialog.openDialogs.length&&this.dialog.closeAll(),this.returnUrl=this.route.snapshot.queryParams.returnUrl||""}get userName(){return this.loginForm.get("userName")}get password(){return this.loginForm.get("password")}handleForgetPassword(){this.router.navigate(["auth/forgetPassword"])}handleSubmit(){this.loginForm.valid&&(this.logging=!0,this.subscriptions.push(this._login.login(this.loginForm.value).subscribe({next:s=>{let o=s.body;this._login.setLocalStorage(o),this._login.username.next(o.username),this._attendance.checkedIn.next(o.isCheckedIn),this._login.isLogged=!0},error:s=>{this.logging=!1,this._login.isLogged=!1,this._login.username.next(null),this._login.clearLocalStorage(),this.toastr.error((s.error??s).message,"unauthorized")},complete:()=>{this.logging=!1,this.toastr.success("loged in sucessfully","logged in"),this.router.navigate([this.returnUrl])}})))}ngOnDestroy(){this.subscriptions.forEach(s=>s.unsubscribe())}}a.\u0275fac=function(s){return new(s||a)(t.Y36(p.F0),t.Y36(C.uw),t.Y36(p.gz),t.Y36(A.e),t.Y36(e.qu),t.Y36(_._W),t.Y36(h.v))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-login"]],decls:27,vars:10,consts:[[1,"shadow-lg","pt-4",2,"width","450px","border","1px solid #dadce0"],[1,"text-center","my-2"],["src","/assets/Layer.png","alt","One Library","width","100"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["appearance","outline","color","warn",1,"w-100"],["type","text","matInput","","formControlName","userName"],[4,"ngIf"],["matInput","","formControlName","password",3,"type"],["type","button","mat-icon-button","","matSuffix","",3,"click"],["align","start",1,"justify-content-between"],["mat-raised-button","","color","warn",3,"disabled"],["type","button","mat-stroked-button","","color","warn",1,"mx-2",3,"click"]],template:function(s,o){1&s&&(t.TgZ(0,"mat-card",0)(1,"div",1),t._UZ(2,"img",2),t.qZA(),t.TgZ(3,"form",3),t.NdJ("ngSubmit",function(){return o.handleSubmit()}),t.TgZ(4,"mat-card-header")(5,"mat-card-title",4),t._uU(6,"\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644"),t.qZA()(),t.TgZ(7,"mat-card-content")(8,"mat-form-field",5)(9,"mat-label"),t._uU(10,"\u0623\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"),t.qZA(),t._UZ(11,"input",6),t.YNc(12,c,2,0,"mat-error",7),t.qZA(),t.TgZ(13,"mat-form-field",5)(14,"mat-label"),t._uU(15,"\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0633\u0631\u064a"),t.qZA(),t._UZ(16,"input",8),t.TgZ(17,"button",9),t.NdJ("click",function(){return o.hide=!o.hide}),t.TgZ(18,"mat-icon"),t._uU(19),t.qZA()(),t.YNc(20,d,2,1,"mat-error",7),t.YNc(21,n,4,0,"mat-error",7),t.qZA()(),t.TgZ(22,"mat-card-actions",10)(23,"button",11),t._uU(24),t.qZA(),t.TgZ(25,"button",12),t.NdJ("click",function(){return o.handleForgetPassword()}),t._uU(26,"\u0646\u0633\u064a\u062a \u0643\u0644\u0645\u0629 \u0627\u0644\u0633\u0631\u061f"),t.qZA()()()()),2&s&&(t.xp6(3),t.Q6J("formGroup",o.loginForm),t.xp6(9),t.Q6J("ngIf",null==o.userName.errors?null:o.userName.errors.required),t.xp6(4),t.Q6J("type",o.hide?"password":"text"),t.xp6(1),t.uIk("aria-label","Hide password")("aria-pressed",o.hide),t.xp6(2),t.Oqu(o.hide?"visibility_off":"visibility"),t.xp6(1),t.Q6J("ngIf",(null==o.password.errors?null:o.password.errors.minlength)&&!(null!=o.password.errors&&o.password.errors.required)),t.xp6(1),t.Q6J("ngIf",null==o.password.errors?null:o.password.errors.required),t.xp6(2),t.Q6J("disabled",!o.loginForm.valid||o.logging),t.xp6(1),t.Oqu(o.logging?"\u0627\u0646\u062a\u0638\u0631 \u0645\u0646 \u0641\u0636\u0644\u0643":"\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644"))},dependencies:[i.O5,m.KE,m.hX,m.TO,m.R9,f.Hw,O.Nt,l.a8,l.hq,l.dn,l.dk,l.n5,E.lW,E.RK,e._Y,e.Fj,e.JJ,e.JL,e.sg,e.u],styles:["mat-card[_ngcontent-%COMP%]{width:20%}[_nghost-%COMP%]{height:100%;display:flex;justify-content:center;vertical-align:middle;align-items:center}"]})},7163:(D,g,r)=>{r.d(g,{o:()=>e});var e=(()=>{return(t=e||(e={}))[t.\u0648\u0627\u0631\u062f=0]="\u0648\u0627\u0631\u062f",t[t.\u0635\u0627\u062f\u0631=1]="\u0635\u0627\u062f\u0631",e;var t})()},4662:(D,g,r)=>{r.d(g,{o:()=>e});var e=(()=>{return(t=e||(e={}))[t.\u0648\u0627\u0631\u062f=0]="\u0648\u0627\u0631\u062f",t[t.\u0635\u0627\u062f\u0631=1]="\u0635\u0627\u062f\u0631",e;var t})()},5285:(D,g,r)=>{r.d(g,{r:()=>_});var e=r(4650),t=r(5412),p=r(9383),C=r(2703),A=r(7185);class _{constructor(i,m,f,O){this.matDialogRef=i,this.translate=m,this.service=f,this.toastr=O,this.subscriptions=[],this.isSubmitting=!1,this.onNoClick=()=>this.matDialogRef.close(),this.add=l=>this.subscriptions.push(this.service.add(l).subscribe(this.addAndUpdateObserver())),this.update=(l,E)=>this.subscriptions.push(this.service.update(l,E).subscribe(this.addAndUpdateObserver())),this.ngOnDestroy=()=>this.subscriptions.forEach(l=>l.unsubscribe())}addAndUpdateObserver(){return{next:i=>{this.service.dialogData=i.body,this.matDialogRef.close({data:i})},error:i=>{this.isSubmitting=!1,this.toastr.error((i.error??i).message)},complete:()=>{this.isSubmitting=!1}}}}_.\u0275fac=function(i){return new(i||_)(e.LFG(t.so),e.LFG(p.sK),e.LFG(C.M),e.LFG(A._W))},_.\u0275prov=e.Yz7({token:_,factory:_.\u0275fac})},5810:(D,g,r)=>{r.d(g,{Y:()=>c});var e=r(4650),t=r(4006),p=r(1135),C=r(8675),A=r(4004),_=r(6895),h=r(9549),i=r(4144),m=r(3238),f=r(3805);function O(d,n){if(1&d&&(e.TgZ(0,"mat-option",6),e._uU(1),e.qZA()),2&d){const a=n.$implicit;e.Q6J("value",a),e.xp6(1),e.hij(" ",a.name," ")}}function l(d,n){1&d&&(e.TgZ(0,"mat-error"),e._uU(1,"\u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u063a\u064a\u0631 \u0635\u062d\u064a\u062d\u0629"),e.qZA())}function E(d,n){1&d&&(e.TgZ(0,"mat-error"),e._uU(1," \u064a\u062c\u0628 \u0627\u062f\u062e\u0627\u0644 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a "),e.qZA())}class c{constructor(){this.subscriptions=[],this.label="",this.clear=new p.X(0),this.placeholder="",this.formControlName="",this.dataSource=[],this.selectedId=new e.vpe,this.nameControl=new t.NI,this.filter=n=>this.dataSource.filter(u=>{let s="";for(var o in u)s+=u[o];return s=s.toLowerCase(),"string"==typeof n?-1!==s.indexOf(n.trim().trimEnd().toLowerCase()):-1!==s.indexOf(n)}),this.displayFn=n=>n?n.name:"",this.getItemId=n=>this.selectedId.emit(n?n.id:null),this.ngOnDestroy=()=>this.subscriptions.forEach(n=>n.unsubscribe())}ngOnInit(){this.nameControl.addValidators([t.kI.required]),this.filteredData$=this.nameControl.valueChanges.pipe((0,C.O)(this.nameControl.value),(0,A.U)(n=>{if(n){let a=this.filter(n);if(a.length)return this.nameControl.setErrors({required:!0}),this.selectedId.emit(void 0),a;"object"!=typeof n&&(this.nameControl.setErrors({notFound:!0}),this.selectedId.emit(void 0))}return this.dataSource.slice()})),this.subscriptions.push(this.clear.subscribe({next:()=>{this.nameControl.reset()}}))}ngOnChanges(n){if(n.dataSource&&this.nameControl.reset(),this.dataSource.length&&this.selectedValue){let a=this.dataSource.find(u=>u.id===this.selectedValue);setTimeout(()=>{this.nameControl.setValue(a)})}}}c.\u0275fac=function(n){return new(n||c)},c.\u0275cmp=e.Xpm({type:c,selectors:[["autocomplete"]],inputs:{label:"label",clear:"clear",placeholder:"placeholder",formControlName:"formControlName",dataSource:"dataSource",selectedValue:"selectedValue"},outputs:{selectedId:"selectedId"},features:[e.TTD],decls:10,vars:10,consts:[[3,"displayWith","optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["color","warn","appearance","fill",1,"w-100"],["matInput","",3,"formControl","matAutocomplete","placeholder"],[4,"ngIf"],[3,"value"]],template:function(n,a){if(1&n&&(e.TgZ(0,"mat-autocomplete",0,1),e.NdJ("optionSelected",function(s){return a.getItemId(s.option.value)}),e.YNc(2,O,2,2,"mat-option",2),e.ALo(3,"async"),e.qZA(),e.TgZ(4,"mat-form-field",3)(5,"mat-label"),e._uU(6),e.qZA(),e._UZ(7,"input",4),e.YNc(8,l,2,0,"mat-error",5),e.YNc(9,E,2,0,"mat-error",5),e.qZA()),2&n){const u=e.MAs(1);e.Q6J("displayWith",a.displayFn),e.xp6(2),e.Q6J("ngForOf",e.lcZ(3,8,a.filteredData$)),e.xp6(4),e.Oqu(a.label),e.xp6(1),e.Q6J("formControl",a.nameControl)("matAutocomplete",u)("placeholder",a.placeholder),e.xp6(1),e.Q6J("ngIf",a.nameControl.hasError("notFound")),e.xp6(1),e.Q6J("ngIf",a.nameControl.hasError("required")&&(a.nameControl.touched||a.nameControl.dirty))}},dependencies:[_.sg,_.O5,h.KE,h.hX,h.TO,i.Nt,m.ey,f.XC,f.ZL,t.Fj,t.JJ,t.oH,_.Ov]})}}]);