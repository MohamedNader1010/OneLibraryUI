"use strict";(self.webpackChunkOneLibraryUI=self.webpackChunkOneLibraryUI||[]).push([[435],{8435:(Y,c,o)=>{o.r(c),o.d(c,{ClientFormDialogComponent:()=>a});var u=o(4006),p=o(5285),m=o(5412),t=o(4650),f=o(7185),d=o(9648),C=o(8653),T=o(9383),g=o(6895),_=o(9549),A=o(7392),D=o(4144),E=o(1572),h=o(4385),I=o(3238),O=o(4859);function x(e,r){1&e&&(t.TgZ(0,"h2",5),t._uU(1,"\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0639\u0645\u064a\u0644"),t.qZA())}function F(e,r){1&e&&(t.TgZ(0,"h2",5),t._uU(1,"\u0639\u0645\u064a\u0644 \u062c\u062f\u064a\u062f"),t.qZA())}function M(e,r){1&e&&t._UZ(0,"mat-spinner",6)}function Z(e,r){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," \u064a\u062c\u0628 \u0627\u062f\u062e\u0627\u0644 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a "),t.qZA())}function v(e,r){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," \u064a\u062c\u0628 \u0627\u062f\u062e\u0627\u0644 \u0631\u0642\u0645 \u062a\u0644\u064a\u0641\u0648\u0646 \u0635\u062d\u064a\u062d "),t.qZA())}function U(e,r){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," \u064a\u062c\u0628 \u0627\u062f\u062e\u0627\u0644 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a "),t.qZA())}function P(e,r){if(1&e&&(t.TgZ(0,"mat-option",21),t._uU(1),t.qZA()),2&e){const n=r.$implicit;t.Q6J("value",n.id),t.xp6(1),t.Oqu(n.name)}}function y(e,r){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," \u064a\u062c\u0628 \u0627\u062f\u062e\u0627\u0644 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a "),t.qZA())}function L(e,r){if(1&e){const n=t.EpF();t.TgZ(0,"form",7),t.NdJ("ngSubmit",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.handleSubmit())}),t.TgZ(1,"div",8)(2,"div",9)(3,"mat-form-field",10)(4,"mat-label"),t._uU(5,"\u0627\u0644\u0623\u0633\u0645"),t.qZA(),t._UZ(6,"input",11),t.YNc(7,Z,2,0,"mat-error",12),t.qZA()()(),t.TgZ(8,"div",8)(9,"div",9)(10,"mat-form-field",13)(11,"mat-label"),t._uU(12,"\u0631\u0642\u0645 \u0627\u0644\u062a\u0644\u0641\u0648\u0646"),t.qZA(),t._UZ(13,"input",14),t.TgZ(14,"mat-icon",15),t._uU(15,"phone"),t.qZA(),t.YNc(16,v,2,0,"mat-error",12),t.YNc(17,U,2,0,"mat-error",12),t.qZA()(),t.TgZ(18,"div",9)(19,"mat-form-field",13)(20,"mat-label"),t._uU(21,"\u0627\u0644\u0646\u0648\u0639"),t.qZA(),t.TgZ(22,"mat-select",16),t.YNc(23,P,2,2,"mat-option",17),t.qZA(),t.YNc(24,y,2,0,"mat-error",12),t.qZA()()(),t.TgZ(25,"div",18)(26,"button",19),t._uU(27,"\u062d\u0641\u0638"),t.qZA(),t.TgZ(28,"button",20),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.onNoClick())}),t._uU(29,"\u0631\u062c\u0648\u0639"),t.qZA()()()}if(2&e){const n=t.oxw();t.Q6J("formGroup",n.Form),t.xp6(7),t.Q6J("ngIf",null==n.name.errors?null:n.name.errors.required),t.xp6(9),t.Q6J("ngIf",(null==n.phone.errors?null:n.phone.errors.pattern)&&!(null!=n.phone.errors&&n.phone.errors.required)),t.xp6(1),t.Q6J("ngIf",null==n.phone.errors?null:n.phone.errors.required),t.xp6(6),t.Q6J("ngForOf",n.ClientTypeDataSource),t.xp6(1),t.Q6J("ngIf",null==n.clientTypeId.errors?null:n.clientTypeId.errors.required),t.xp6(2),t.s9C("disabled",!n.Form.valid)}}class a extends p.r{constructor(r,n,l,i,K,W,N){super(N,K,n,r),this.toastr=r,this._clientType=l,this.fb=i,this.data=W,this.ClientTypeDataSource=[],this.isLoading=!1,this.getAllClientTypes=()=>this.subscriptions.push(this._clientType.getAll().subscribe({next:s=>{this.ClientTypeDataSource=s.body},error:s=>{this.toastr.error(s.message,this.translate.instant("error.cantLoadData"))}})),this.Form=this.fb.group({name:["",[u.kI.required,u.kI.maxLength(100)]],phoneNumber:["",[u.kI.required,u.kI.pattern("01[0125][0-9]{8}")]],clientTypeId:["",[u.kI.required]]})}get name(){return this.Form.get("name")}get phone(){return this.Form.get("phoneNumber")}get clientTypeId(){return this.Form.get("clientTypeId")}ngOnInit(){this.getAllClientTypes(),this.data&&this.Form.patchValue(this.data)}handleSubmit(){this.Form.valid&&(this.data?this.update(this.data.id,this.Form.value):this.add(this.Form.value))}}a.\u0275fac=function(r){return new(r||a)(t.Y36(f._W),t.Y36(d.y),t.Y36(C.q),t.Y36(u.qu),t.Y36(T.sK),t.Y36(m.WI),t.Y36(m.so))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-client-form-dialog"]],features:[t.qOj],decls:7,vars:4,consts:[[1,"container"],["class","w-100 text-center mt-3",4,"ngIf","ngIfElse"],["update",""],["class","mx-auto mt-5","color","warn",4,"ngIf"],["class","d-flex flex-column w-100",3,"formGroup","ngSubmit",4,"ngIf"],[1,"w-100","text-center","mt-3"],["color","warn",1,"mx-auto","mt-5"],[1,"d-flex","flex-column","w-100",3,"formGroup","ngSubmit"],[1,"row"],[1,"col"],["color","warn",1,"w-100"],["matInput","","formControlName","name"],[4,"ngIf"],["appearance","fill","color","warn",1,"w-100"],["type","tel","matInput","","formControlName","phoneNumber"],["matSuffix",""],["formControlName","clientTypeId"],[3,"value",4,"ngFor","ngForOf"],[1,"my-2","d-flex","flex-row-reverse"],["mat-flat-button","","color","warn",1,"mx-2","px-4",3,"disabled"],["type","button","mat-stroked-button","","color","basic",3,"click"],[3,"value"]],template:function(r,n){if(1&r&&(t.TgZ(0,"div",0),t.YNc(1,x,2,0,"h2",1),t.YNc(2,F,2,0,"ng-template",null,2,t.W1O),t.TgZ(4,"mat-dialog-content"),t.YNc(5,M,1,0,"mat-spinner",3),t.YNc(6,L,30,7,"form",4),t.qZA()()),2&r){const l=t.MAs(3);t.xp6(1),t.Q6J("ngIf",n.data)("ngIfElse",l),t.xp6(4),t.Q6J("ngIf",n.isLoading),t.xp6(1),t.Q6J("ngIf",!n.isLoading)}},dependencies:[u._Y,u.Fj,u.JJ,u.JL,u.sg,u.u,g.sg,g.O5,m.xY,_.KE,_.hX,_.TO,_.R9,A.Hw,D.Nt,E.Ou,h.gD,I.ey,O.lW],styles:[".container[_ngcontent-%COMP%]{width:800px}"]})}}]);