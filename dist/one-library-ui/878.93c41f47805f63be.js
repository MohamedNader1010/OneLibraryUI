"use strict";(self.webpackChunkOneLibraryUI=self.webpackChunkOneLibraryUI||[]).push([[878],{3878:(M,v,s)=>{s.r(v),s.d(v,{ClientTypeModule:()=>d});var T=s(6895),o=s(4006),C=s(6578),F=s(1697),D=s(7110),Z=s(5861),S=s(7957),t=s(4650),A=s(5412);class l{constructor(e){this.dialog=e}canDeactivate(e){var i=this;return(0,Z.Z)(function*(){return!!(e.Form.touched&&e.Form.dirty&&e.isSubmitted||e.Form.untouched)||(yield new Promise((u,y)=>{i.dialog.closeAll(),i.dialog.open(S.a,{disableClose:!0,data:{location:"unsaved changes",msg:"you are about to leave this page without saving your changes,are you sure?"}}).afterClosed().subscribe({next:f=>u(f),error:f=>y()})}))})()}}l.\u0275fac=function(e){return new(e||l)(t.LFG(A.uw))},l.\u0275prov=t.Yz7({token:l,factory:l.\u0275fac});var m=s(1390),g=s(8653),I=s(7185),O=s(2893);class p{constructor(e,i,a){this._clientType=e,this.dialog=i,this.toastr=a,this.subscriptions=[],this.handleDelete=u=>this.subscriptions.push(this._clientType.delete(u).subscribe(()=>this.getAll()))}ngOnInit(){this.tableColumns=[{columnDef:"id",header:"#",cell:e=>e.id},{columnDef:"Name",header:"\u0627\u0644\u0623\u0633\u0645",cell:e=>e.name}],this.getAll()}getAll(){this.loading=!0,this.subscriptions.push(this._clientType.getAll().subscribe({next:e=>{this.tableData=e},error:e=>{this.toastr.error(e.message,"\u0644\u0627\u064a\u0645\u0643\u0646 \u062a\u062d\u0645\u064a\u0644 \u0627\u0628\u064a\u0627\u0646\u0627\u062a "),this.loading=!1},complete:()=>{this.loading=!1}}))}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}}p.\u0275fac=function(e){return new(e||p)(t.Y36(g.q),t.Y36(A.uw),t.Y36(I._W))},p.\u0275cmp=t.Xpm({type:p,selectors:[["app-all"]],decls:1,vars:3,consts:[["dialogHeader","\u062d\u0630\u0641 \u0646\u0648\u0639 \u0627\u0644\u0639\u0645\u064a\u0644","dialogDisplayName","name",3,"loading","tableColumns","tableData","OnDelete"]],template:function(e,i){1&e&&(t.TgZ(0,"app-table",0),t.NdJ("OnDelete",function(u){return i.handleDelete(u)}),t.qZA()),2&e&&t.Q6J("loading",i.loading)("tableColumns",i.tableColumns)("tableData",i.tableData)},dependencies:[O.a]});var b=s(9549),E=s(4144),N=s(4859);function J(n,e){1&n&&(t.TgZ(0,"h2",12),t._uU(1,"\u062a\u0639\u062f\u064a\u0644 \u0646\u0648\u0639 \u0627\u0644\u0639\u0645\u064a\u0644"),t.qZA())}function U(n,e){1&n&&(t.TgZ(0,"h2",12),t._uU(1,"\u0646\u0648\u0639 \u0639\u0645\u064a\u0644 \u062c\u062f\u064a\u062f"),t.qZA())}function Y(n,e){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Name is "),t.TgZ(2,"strong"),t._uU(3,"required"),t.qZA()())}class r{constructor(e,i,a,u){this.router=e,this.route=i,this._clientType=a,this.fb=u,this.subscriptions=[],this.controllerName="clientTypes",this.isSubmitted=!1,this.getSingle=y=>this.subscriptions.push(this._clientType.getOne(y).subscribe(f=>this.Form.patchValue(f))),this.back=()=>this.router.navigate([this.controllerName]),this.Form=this.fb.group({name:["",[o.kI.required,o.kI.maxLength(100)]]})}get name(){return this.Form.get("name")}ngOnInit(){this.subscriptions.push(this.route.queryParams.subscribe(e=>this.id=e.id)),this.id&&this.getSingle(this.id)}handleSubmit(){this.Form.valid&&this.subscriptions.push(this.id?this._clientType.update(this.id,this.Form.value).subscribe(()=>{this.isSubmitted=!0,this.back()}):this._clientType.add(this.Form.value).subscribe(()=>{this.isSubmitted=!0,this.back()}))}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}}r.\u0275fac=function(e){return new(e||r)(t.Y36(m.F0),t.Y36(m.gz),t.Y36(g.q),t.Y36(o.qu))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-add-edit"]],decls:17,vars:5,consts:[["class","w-100 text-center mt-3",4,"ngIf","ngIfElse"],["update",""],[1,"container","d-flex","justify-content-center"],[1,"d-flex","flex-column","w-50",3,"formGroup","ngSubmit"],[1,"row"],[1,"col"],[1,"w-100"],["matInput","","formControlName","name"],[4,"ngIf"],[1,"my-2","d-flex","flex-row-reverse"],["mat-flat-button","","color","warn",1,"mx-2","px-4",3,"disabled"],["type","button","mat-stroked-button","","color","basic",3,"click"],[1,"w-100","text-center","mt-3"]],template:function(e,i){if(1&e&&(t.YNc(0,J,2,0,"h2",0),t.YNc(1,U,2,0,"ng-template",null,1,t.W1O),t.TgZ(3,"section",2)(4,"form",3),t.NdJ("ngSubmit",function(){return i.handleSubmit()}),t.TgZ(5,"div",4)(6,"div",5)(7,"mat-form-field",6)(8,"mat-label"),t._uU(9,"\u0627\u0644\u0623\u0633\u0645"),t.qZA(),t._UZ(10,"input",7),t.YNc(11,Y,4,0,"mat-error",8),t.qZA()()(),t.TgZ(12,"div",9)(13,"button",10),t._uU(14,"\u062d\u0641\u0638"),t.qZA(),t.TgZ(15,"button",11),t.NdJ("click",function(){return i.back()}),t._uU(16,"\u0631\u062c\u0648\u0639"),t.qZA()()()()),2&e){const a=t.MAs(2);t.Q6J("ngIf",i.id)("ngIfElse",a),t.xp6(4),t.Q6J("formGroup",i.Form),t.xp6(7),t.Q6J("ngIf",null==i.name.errors?null:i.name.errors.required),t.xp6(2),t.s9C("disabled",!i.Form.valid)}},dependencies:[o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,T.O5,b.KE,b.hX,b.TO,E.Nt,N.lW]});class h{constructor(){}ngOnInit(){}}h.\u0275fac=function(e){return new(e||h)},h.\u0275cmp=t.Xpm({type:h,selectors:[["app-clientType"]],decls:1,vars:0,template:function(e,i){1&e&&t._UZ(0,"router-outlet")},dependencies:[m.lC]});const x=[{path:"",component:h,title:"\u0627\u0646\u0648\u0627\u0639 \u0627\u0644\u0639\u0645\u0644\u0627\u0621",canActivateChild:[C.i],children:[{path:"all",component:p,title:"\u062c\u0645\u064a\u0639 \u0627\u0646\u0648\u0627\u0639 \u0627\u0644\u0639\u0645\u0644\u0627\u0621"},{path:"new",component:r,title:"\u0627\u0636\u0627\u0641\u0629 \u0646\u0648\u0639 \u0639\u0645\u064a\u0644 \u062c\u062f\u064a\u062f",canDeactivate:[l]},{path:"edit",component:r,title:"\u062a\u0639\u062f\u064a\u0644 \u0646\u0648\u0639 \u0627\u0644\u0639\u0645\u064a\u0644",canDeactivate:[l]},{path:"",redirectTo:"all",pathMatch:"full"}]}];class c{}c.\u0275fac=function(e){return new(e||c)},c.\u0275mod=t.oAB({type:c}),c.\u0275inj=t.cJS({imports:[m.Bz.forChild(x),m.Bz]});class d{}d.\u0275fac=function(e){return new(e||d)},d.\u0275mod=t.oAB({type:d}),d.\u0275inj=t.cJS({providers:[C.i,g.q,l],imports:[o.u5,o.UX,T.ez,c,F.I,D.SharedModule]})}}]);