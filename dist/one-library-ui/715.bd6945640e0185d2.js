"use strict";(self.webpackChunkOneLibraryUI=self.webpackChunkOneLibraryUI||[]).push([[715],{9715:(st,T,i)=>{i.r(T),i.d(T,{AttendanceModule:()=>p});var c=i(6895),Z=i(1390),I=i(6578),S=i(7974),y=i(6308),U=i(4968),M=i(5249),A=i(9943),s=i(5412),t=i(4650),v=i(7185),x=i(4859);class f{constructor(e,o,n,l){this.dialogRef=e,this.data=o,this.dataService=n,this.toastr=l,this.isSubmitting=!1}onNoClick(){this.dialogRef.close()}confirmDelete(){this.dataService.delete(this.data.id).subscribe({next:e=>{this.isSubmitting=!0,this.dialogRef.close({data:e})},error:e=>{this.isSubmitting=!1,this.toastr.error((e.error??e).message)},complete:()=>{this.isSubmitting=!1}})}}f.\u0275fac=function(e){return new(e||f)(t.Y36(s.so),t.Y36(s.WI),t.Y36(A.v),t.Y36(v._W))},f.\u0275cmp=t.Xpm({type:f,selectors:[["app-delete",8,"dialog"]],attrs:["class","dialog"],decls:25,vars:5,consts:[[1,"container"],["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","tabindex","-1",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h3",1),t._uU(2,"\u0633\u064a\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u062a\u0627\u0644\u064a\u0629 , \u0647\u0644 \u0627\u0646\u062a \u0645\u062a\u0623\u0643\u062f\u061f"),t.qZA(),t.TgZ(3,"div",2)(4,"h4")(5,"strong"),t._uU(6,"Id:"),t.qZA(),t._uU(7),t.qZA(),t.TgZ(8,"h4")(9,"strong"),t._uU(10,"\u0623\u0633\u0645 \u0627\u0644\u0645\u0648\u0638\u0641 :"),t.qZA(),t._uU(11),t.qZA(),t.TgZ(12,"h4")(13,"strong"),t._uU(14,"\u062d\u0636\u0648\u0631 :"),t.qZA(),t._uU(15),t.qZA(),t.TgZ(16,"h4")(17,"strong"),t._uU(18,"\u0627\u0646\u0635\u0631\u0627\u0641 :"),t.qZA(),t._uU(19),t.qZA()(),t.TgZ(20,"div",3)(21,"button",4),t.NdJ("click",function(){return o.confirmDelete()}),t._uU(22),t.qZA(),t.TgZ(23,"button",5),t.NdJ("click",function(){return o.onNoClick()}),t._uU(24,"\u0625\u0644\u063a\u0627\u0621"),t.qZA()()()),2&e&&(t.xp6(7),t.hij(" ",o.data.id,""),t.xp6(4),t.Oqu(o.data.employee),t.xp6(4),t.Oqu(o.data.checkIn),t.xp6(4),t.Oqu(o.data.checkOut),t.xp6(3),t.Oqu(o.isSubmitting?"\u0627\u0646\u062a\u0638\u0631 \u0645\u0646 \u0641\u0636\u0644\u0643":"\u062d\u0630\u0641"))},dependencies:[s.uh,s.xY,s.H8,x.lW],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]});var r=i(4006),w=i(3155),m=i(9549),O=i(4144),k=i(4385),F=i(3238);function E(a,e){1&a&&(t.TgZ(0,"h2",15),t._uU(1,"\u062a\u0639\u062f\u064a\u0644 \u062d\u0636\u0648\u0631 \u0648\u0627\u0646\u0635\u0631\u0627\u0641"),t.qZA())}function q(a,e){1&a&&(t.TgZ(0,"h2",15),t._uU(1,"\u062a\u0633\u062c\u064a\u0644 \u062d\u0636\u0648\u0631 \u0648 \u0627\u0646\u0635\u0631\u0627\u0641"),t.qZA())}function J(a,e){if(1&a&&(t.TgZ(0,"h4")(1,"strong"),t._uU(2,"\u0627\u0644\u062a\u0627\u0631\u064a\u062e :"),t.qZA(),t._uU(3),t.ALo(4,"date"),t.qZA()),2&a){const o=t.oxw();t.xp6(3),t.hij(" ",t.xi3(4,1,o.data.checkIn,"dd/MM/yyyy"),"")}}function R(a,e){if(1&a&&(t.TgZ(0,"mat-option",18),t._uU(1),t.qZA()),2&a){const o=e.$implicit;t.Q6J("value",o.id),t.xp6(1),t.Oqu(o.name)}}function H(a,e){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," \u064a\u062c\u0628 \u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0645\u0648\u0638\u0641 "),t.qZA())}function Q(a,e){if(1&a&&(t.TgZ(0,"mat-form-field",9)(1,"mat-label"),t._uU(2,"\u0627\u0644\u0645\u0648\u0638\u0641"),t.qZA(),t.TgZ(3,"mat-select",16),t.YNc(4,R,2,2,"mat-option",17),t.qZA(),t.YNc(5,H,2,0,"mat-error",3),t.qZA()),2&a){const o=t.oxw();t.xp6(4),t.Q6J("ngForOf",o.EmployeesDataSource),t.xp6(1),t.Q6J("ngIf",o.employeeId.hasError("required")&&(o.employeeId.touched||o.employeeId.dirty))}}function P(a,e){1&a&&(t.TgZ(0,"mat-form-field",9)(1,"mat-label"),t._uU(2,"\u0627\u0644\u0645\u0648\u0638\u0641"),t.qZA(),t._UZ(3,"input",19),t.qZA())}function z(a,e){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," \u064a\u062c\u0628 \u0627\u062f\u062e\u0627\u0644 \u0648\u0642\u062a \u0627\u0644\u062d\u0636\u0648\u0631 "),t.qZA())}class d{constructor(e,o,n,l,_,D,lt){this.dialogRef=e,this.data=o,this._attendance=n,this.fb=l,this.toastr=_,this._employee=D,this.datePipe=lt,this.subscriptions=[],this.isSubmitting=!1,this.EmployeesDataSource=[],this.getAllEmployees=()=>this.subscriptions.push(this._employee.getAll().subscribe({next:C=>{this.EmployeesDataSource=C.body},error:C=>{this.isSubmitting=!1,this.toastr.error((C.error??C).message)},complete:()=>{this.data&&this.form.patchValue({id:this.data.id,employeeId:this.data.employeeId,employee:this.data.employee,checkIn:this.datePipe.transform(this.data.checkIn,"HH:mm"),checkOut:this.datePipe.transform(this.data.checkOut,"HH:mm")})}})),this.form=this.fb.group({id:[null],employeeId:[null,[r.kI.required]],checkIn:[null,[r.kI.required]],checkOut:[null],employee:[""]})}get id(){return this.form.get("id")}get employeeId(){return this.form.get("employeeId")}get checkIn(){return this.form.get("checkIn")}get checkOut(){return this.form.get("checkOut")}ngOnInit(){this.getAllEmployees()}onNoClick(){this.dialogRef.close()}handleSubmit(){this.form.valid&&(this.id.value?this.update():this.add())}update(){this.subscriptions.push(this._attendance.update(this.id.value,this.form.value).subscribe({next:e=>{this.isSubmitting=!0,this._attendance.dialogData=e.body,this.dialogRef.close({data:e})},error:e=>{this.isSubmitting=!1,this.toastr.error((e.error??e).message)},complete:()=>{this.isSubmitting=!1}}))}add(){this.subscriptions.push(this._attendance.add(this.form.value).subscribe({next:e=>{this.isSubmitting=!0,this._attendance.dialogData=e.body,this.dialogRef.close({data:e})},error:e=>{this.isSubmitting=!1,this.toastr.error((e.error??e).message)},complete:()=>{this.isSubmitting=!1}}))}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}}d.\u0275fac=function(e){return new(e||d)(t.Y36(s.so),t.Y36(s.WI),t.Y36(A.v),t.Y36(r.qu),t.Y36(v._W),t.Y36(w.G),t.Y36(c.uU))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-form",8,"dialog"]],attrs:["class","dialog"],decls:32,vars:9,consts:[[1,"container"],["mat-dialog-title","",4,"ngIf","ngIfElse"],["update",""],[4,"ngIf"],[1,"d-flex","flex-column","mat-dialog-content",3,"formGroup","ngSubmit"],[1,"row"],["appearance","fill","class","w-100",4,"ngIf","ngIfElse"],["disabled",""],[1,"col-6"],["appearance","fill",1,"w-100"],["matInput","","type","time","formControlName","checkIn"],["matInput","","type","time","formControlName","checkOut"],["mat-dialog-actions",""],["mat-raised-button","","type","submit","color","primary",1,"mx-2","px-4",3,"disabled"],["type","button","mat-stroked-button","","color","warn","tabindex","-1",3,"click"],["mat-dialog-title",""],["formControlName","employeeId"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","text","matInput","","readonly","true","formControlName","employee"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,E,2,0,"h2",1),t.YNc(2,q,2,0,"ng-template",null,2,t.W1O),t.TgZ(4,"mat-dialog-content"),t.YNc(5,J,5,4,"h4",3),t.TgZ(6,"form",4),t.NdJ("ngSubmit",function(){return o.handleSubmit()}),t.TgZ(7,"div",5),t.YNc(8,Q,6,2,"mat-form-field",6),t.YNc(9,P,4,0,"ng-template",null,7,t.W1O),t.qZA(),t.TgZ(11,"div",5)(12,"div",8)(13,"mat-form-field",9)(14,"mat-label"),t._uU(15,"\u062d\u0636\u0648\u0631"),t.qZA(),t.TgZ(16,"mat-hint"),t._uU(17,"HH:MM AM/PM"),t.qZA(),t._UZ(18,"input",10),t.YNc(19,z,2,0,"mat-error",3),t.qZA()(),t.TgZ(20,"div",8)(21,"mat-form-field",9)(22,"mat-label"),t._uU(23,"\u0627\u0646\u0635\u0631\u0627\u0641"),t.qZA(),t.TgZ(24,"mat-hint"),t._uU(25,"HH:MM AM/PM"),t.qZA(),t._UZ(26,"input",11),t.qZA()()(),t.TgZ(27,"div",12)(28,"button",13),t._uU(29),t.qZA(),t.TgZ(30,"button",14),t.NdJ("click",function(){return o.onNoClick()}),t._uU(31,"\u0625\u0644\u063a\u0627\u0621"),t.qZA()()()()()),2&e){const n=t.MAs(3),l=t.MAs(10);t.xp6(1),t.Q6J("ngIf",o.id.value)("ngIfElse",n),t.xp6(4),t.Q6J("ngIf",o.data),t.xp6(1),t.Q6J("formGroup",o.form),t.xp6(2),t.Q6J("ngIf",!o.employeeId.value)("ngIfElse",l),t.xp6(11),t.Q6J("ngIf",o.checkIn.hasError("required")&&(o.checkIn.touched||o.checkIn.dirty)),t.xp6(9),t.Q6J("disabled",!o.form.valid||o.isSubmitting),t.xp6(1),t.Oqu(o.isSubmitting?"\u0627\u0646\u062a\u0638\u0631 \u0645\u0646 \u0641\u0636\u0644\u0643":"\u062d\u0641\u0638")}},dependencies:[c.sg,c.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,s.uh,s.xY,s.H8,m.KE,m.hX,m.bx,m.TO,O.Nt,k.gD,F.ey,x.lW,c.uU],styles:[".container[_ngcontent-%COMP%]{min-width:450px}"]});var G=i(529),W=i(7392),u=i(671);const B=["filter"];function X(a,e){if(1&a){const o=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(o);const l=t.oxw();return t.KtG(l.clearFilter())}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function j(a,e){if(1&a&&(t.TgZ(0,"th",20),t._uU(1),t.qZA()),2&a){const o=t.oxw().$implicit;t.xp6(1),t.Oqu(o.header)}}function K(a,e){if(1&a&&(t.TgZ(0,"td",21),t._uU(1),t.ALo(2,"date"),t.qZA()),2&a){const o=e.$implicit,n=t.oxw().$implicit;t.xp6(1),t.Oqu(n.columnDef.indexOf("time")>=0?t.xi3(2,1,n.cell(o),"dd/MM/yyyy || hh:mm a"):n.cell(o))}}function L(a,e){if(1&a&&(t.ynx(0,18),t.YNc(1,j,2,1,"th",19),t.YNc(2,K,3,4,"td",11),t.BQk()),2&a){const n=e.first;t.Q6J("matColumnDef",e.$implicit.columnDef)("sticky",n)}}function $(a,e){if(1&a){const o=t.EpF();t.TgZ(0,"th",22)(1,"button",23),t.NdJ("click",function(){t.CHM(o);const l=t.oxw();return t.KtG(l.addNew())}),t.TgZ(2,"mat-icon",24),t._uU(3,"add"),t.qZA()()()}}function V(a,e){if(1&a){const o=t.EpF();t.TgZ(0,"td",21)(1,"button",25),t.NdJ("click",function(){const _=t.CHM(o).$implicit,D=t.oxw();return t.KtG(D.startEdit(_))}),t.TgZ(2,"mat-icon",26),t._uU(3,"edit"),t.qZA()()()}}function tt(a,e){1&a&&t._UZ(0,"tr",27)}function et(a,e){1&a&&t._UZ(0,"tr",28)}function ot(a,e){if(1&a&&(t.TgZ(0,"tr",29)(1,"td",30)(2,"div",31)(3,"h3"),t._uU(4,'No data"'),t.qZA()()()()),2&a){const o=t.oxw();t.xp6(1),t.Q6J("colSpan",o.displayedColumns.length)}}class g{constructor(e,o,n,l){this.httpClient=e,this.dialog=o,this._attendance=n,this.toastr=l,this.subscriptions=[],this.paginationSizes=[10,20,50,100],this.tableColumns=[],this.clearFilter=()=>this.dataSource.filter=this.filter.nativeElement.value="",this.refreshTable=()=>this.paginator._changePageSize(this.paginator.pageSize),this.ngOnDestroy=()=>this.subscriptions.forEach(_=>_.unsubscribe())}ngOnInit(){this.tableColumns=[{columnDef:"id",header:"#",cell:e=>e.id},{columnDef:"name",header:"\u0623\u0633\u0645 \u0627\u0644\u0645\u0648\u0638\u0641",cell:e=>e.employee},{columnDef:"time-in",header:"\u062d\u0636\u0648\u0631",cell:e=>e.checkIn},{columnDef:"time-out",header:"\u0627\u0646\u0635\u0631\u0627\u0641",cell:e=>e.checkOut}],this.displayedColumns=[...this.tableColumns.map(e=>e.columnDef),"actions"],this.loadData()}loadData(){this.database=new A.v(this.httpClient,this.toastr),this.database.getAllAttendance(),this.dataSource=new M.G(this.database,this.paginator,this.sort),this.subscriptions.push((0,U.R)(this.filter.nativeElement,"keyup").subscribe(()=>{this.dataSource&&(this.dataSource.filter=this.filter.nativeElement.value)}))}addNew(){const e=this.dialog.open(d,{minWidth:"30%"});this.subscriptions.push(e.afterClosed().subscribe(o=>{o?.data&&(this.database.dataChange.value.push(this._attendance.getDialogData()),this.refreshTable(),this.toastr.success(o.data.message))}))}startEdit(e){const o=this.dialog.open(d,{data:e});this.subscriptions.push(o.afterClosed().subscribe(n=>{n?.data&&(this.database.dataChange.value[this.database.dataChange.value.findIndex(l=>l.id===e.id)]=this._attendance.getDialogData(),this.refreshTable(),this.toastr.success(n.data.message))}))}deleteItem(e){const o=this.dialog.open(f,{data:e,minWidth:"30%"});this.subscriptions.push(o.afterClosed().subscribe(n=>{n?.data&&(this.database.dataChange.value.splice(this.database.dataChange.value.findIndex(l=>l.id===e.id),1),this.refreshTable(),this.toastr.success(n.data.message))}))}}g.\u0275fac=function(e){return new(e||g)(t.Y36(G.eN),t.Y36(s.uw),t.Y36(A.v),t.Y36(v._W))},g.\u0275cmp=t.Xpm({type:g,selectors:[["app-all"]],viewQuery:function(e,o){if(1&e&&(t.Gf(S.NW,7),t.Gf(y.YE,7),t.Gf(B,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first),t.iGM(n=t.CRH())&&(o.filter=n.first)}},inputs:{paginationSizes:"paginationSizes"},decls:17,vars:9,consts:[[1,"mx-5","mt-4","mat-elevation-z2"],["floatPlaceholder","never","color","primary",1,"w-100",2,"background-color","white"],["matInput","","placeholder","Filter"],["filter",""],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["tabindex","0",1,"example-container","mat-elevation-z2","mx-5",2,"background-color","white"],["mat-table","","matSort","","recycleRows","",3,"dataSource"],["table",""],[3,"matColumnDef","sticky",4,"ngFor","ngForOf"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","",1,"mx-5","paginator-bottom","mat-elevation-z2",3,"length","pageIndex","pageSizeOptions"],["paginator",""],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"matColumnDef","sticky"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-icon-button","","color","primary",3,"click"],["aria-label","new item"],["mat-icon-button","",3,"click"],["color","primary","aria-label","Edit"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],[1,"mat-cell","text-center",3,"colSpan"],[1,"h-100"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"mat-form-field",1),t._UZ(2,"input",2,3),t.YNc(4,X,3,0,"button",4),t.qZA()(),t.TgZ(5,"section",5)(6,"table",6,7),t.YNc(8,L,3,2,"ng-container",8),t.ynx(9,9),t.YNc(10,$,4,0,"th",10),t.YNc(11,V,4,0,"td",11),t.BQk(),t.YNc(12,tt,1,0,"tr",12),t.YNc(13,et,1,0,"tr",13),t.YNc(14,ot,5,1,"tr",14),t.qZA()(),t._UZ(15,"mat-paginator",15,16)),2&e){const n=t.MAs(3);t.xp6(4),t.Q6J("ngIf",n.value),t.xp6(2),t.Q6J("dataSource",o.dataSource),t.xp6(2),t.Q6J("ngForOf",o.tableColumns),t.xp6(4),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.dataSource.filteredData.length)("pageIndex",0)("pageSizeOptions",o.paginationSizes)}},dependencies:[c.sg,c.O5,m.KE,m.R9,W.Hw,O.Nt,S.NW,u.BZ,u.AE,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk,u.Ee,y.YE,y.nU,x.RK,c.uU],styles:[".example-container[_ngcontent-%COMP%]{min-height:70vh;max-height:70vh;overflow:auto}table[_ngcontent-%COMP%]{height:100%;width:100%;min-width:100%}table[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#3f51b5}.mat-column-id[_ngcontent-%COMP%]{width:100px;text-align:left}.mat-column-actions[_ngcontent-%COMP%]{width:150px;text-align:right}.mat-mdc-header-cell[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;white-space:nowrap;min-width:100px}.mat-mdc-row[_ngcontent-%COMP%]{white-space:nowrap}.mat-mdc-row[_ngcontent-%COMP%]:hover   .mat-mdc-cell[_ngcontent-%COMP%]{border-color:#ff4500;background-color:#ffdbdb}.paginator-bottom[_ngcontent-%COMP%]{width:auto;position:fixed;bottom:2rem;left:0;right:0}"]});class b{}b.\u0275fac=function(e){return new(e||b)},b.\u0275cmp=t.Xpm({type:b,selectors:[["app-attendance"]],decls:1,vars:0,template:function(e,o){1&e&&t._UZ(0,"router-outlet")},dependencies:[Z.lC]});const at=[{path:"",component:b,title:"\u0627\u0644\u062d\u0636\u0648\u0631 \u0648\u0627\u0644\u0627\u0646\u0635\u0631\u0627\u0641",canActivateChild:[I.i],children:[{path:"all",component:g,title:"\u0627\u0644\u062d\u0636\u0648\u0631 \u0648\u0627\u0644\u0627\u0646\u0635\u0631\u0627\u0641"},{path:"",redirectTo:"all",pathMatch:"full"}]}];class h{}h.\u0275fac=function(e){return new(e||h)},h.\u0275mod=t.oAB({type:h}),h.\u0275inj=t.cJS({imports:[Z.Bz.forChild(at),Z.Bz]});var nt=i(1697),it=i(7110);class p{}p.\u0275fac=function(e){return new(e||p)},p.\u0275mod=t.oAB({type:p}),p.\u0275inj=t.cJS({providers:[I.i,c.uU],imports:[c.ez,h,r.u5,r.UX,c.ez,it.SharedModule,nt.I]})}}]);