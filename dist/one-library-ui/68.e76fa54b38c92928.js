"use strict";(self.webpackChunkOneLibraryUI=self.webpackChunkOneLibraryUI||[]).push([[68],{6068:(Z,d,o)=>{o.r(d),o.d(d,{TransactionComponent:()=>n});var e=o(4006),u=o(5412),m=o(6911),t=o(4650),_=o(9198),c=o(7185),p=o(1390),g=o(6895),s=o(9549),f=o(4144),h=o(4859),E=o(9383);function b(i,a){1&i&&(t.TgZ(0,"mat-error"),t._uU(1,"\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u062f\u0641\u0648\u0639 \u0645\u0637\u0644\u0648\u0628"),t.qZA())}function T(i,a){if(1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&i){const r=t.oxw();t.xp6(1),t.hij(" \u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u062f\u0641\u0648\u0639 < \u0627\u0648 = ",null==r.paid.errors?null:r.paid.errors.value," ")}}class n{constructor(a,r,l,C,O,A,v){this.dialogRef=a,this.data=r,this._order=l,this.toastr=C,this.route=O,this.dialog=A,this.fb=v,this.subscriptions=[],this.isSubmitting=!1,this.ngOnDestroy=()=>this.subscriptions.forEach(P=>P.unsubscribe()),this.Form=this.fb.group({id:[0],orderId:[0,[e.kI.required]],paid:[null,[e.kI.required],[(0,m.Bz)(this._order,this.data.id)]],previousPaid:[r.paid],rest:[r.rest]}),this.data&&(this.orderId.setValue(this.data.id),this.onPaidControlChange())}get id(){return this.Form.get("id")}get orderId(){return this.Form.get("orderId")}get paid(){return this.Form.get("paid")}get rest(){return this.Form.get("rest")}onPaidControlChange(){this.paid.valueChanges.subscribe(a=>{this.rest.setValue(+this.data.rest-a)})}onNoClick(){this.dialogRef.close()}handleSubmit(){this.Form.valid&&(this.isSubmitting=!0,this.add())}add(){this.subscriptions.push(this._order.addOrderTransaction(this.Form.value).subscribe({next:a=>{this._order.dialogData=a.body,this.dialogRef.close({data:a})},error:a=>{this.isSubmitting=!1,this.toastr.error((a.error??a).message)},complete:()=>{this.isSubmitting=!1}}))}}n.\u0275fac=function(a){return new(a||n)(t.Y36(u.so),t.Y36(u.WI),t.Y36(_.p),t.Y36(c._W),t.Y36(p.gz),t.Y36(u.uw),t.Y36(e.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-transaction"]],decls:35,vars:15,consts:[[1,"container"],[1,"w-100","text-center","mt-3"],[1,"d-flex","flex-column",3,"formGroup","ngSubmit"],[1,"row"],["appearance","fill","color","warn",1,"w-100"],["type","text","matInput","","formControlName","orderId","readonly",""],["appearance","fill","color","warn",1,"col-6"],["id","rest","matInput","","type","number","formControlName","rest","readonly","true"],["id","previousPaid","matInput","","type","number","formControlName","previousPaid","readonly","true"],["id","paid","matInput","","type","number","formControlName","paid"],[4,"ngIf"],[1,"my-2","d-flex","flex-row-reverse"],["mat-raised-button","","color","warn",1,"mx-2","px-4",3,"disabled"],["type","button","mat-stroked-button","","color","warn",3,"click"]],template:function(a,r){1&a&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"mat-dialog-content")(5,"form",2),t.NdJ("ngSubmit",function(){return r.handleSubmit()}),t.TgZ(6,"div",3)(7,"mat-form-field",4)(8,"mat-label"),t._uU(9,"\u0631\u0642\u0645 \u0627\u0644\u0637\u0644\u0628"),t.qZA(),t._UZ(10,"input",5),t.qZA()(),t.TgZ(11,"div",3)(12,"mat-form-field",6)(13,"mat-label"),t._uU(14,"\u0627\u0644\u0645\u062a\u0628\u0642\u064a"),t.qZA(),t._UZ(15,"input",7),t.qZA(),t.TgZ(16,"mat-form-field",6)(17,"mat-label"),t._uU(18,"\u0627\u0644\u0645\u062f\u0641\u0648\u0639 \u0645\u0633\u0628\u0642\u0627"),t.qZA(),t._UZ(19,"input",8),t.qZA()(),t.TgZ(20,"div",3)(21,"mat-form-field",4)(22,"mat-label"),t._uU(23,"\u0627\u0644\u0645\u062f\u0641\u0648\u0639 \u062d\u0627\u0644\u064a\u0627"),t.qZA(),t._UZ(24,"input",9),t.YNc(25,b,2,0,"mat-error",10),t.YNc(26,T,2,1,"mat-error",10),t.qZA()(),t.TgZ(27,"div",11)(28,"button",12),t._uU(29),t.ALo(30,"translate"),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"button",13),t.NdJ("click",function(){return r.onNoClick()}),t._uU(33),t.ALo(34,"translate"),t.qZA()()()()()),2&a&&(t.xp6(2),t.Oqu(t.lcZ(3,7,"order.transaction")),t.xp6(3),t.Q6J("formGroup",r.Form),t.xp6(20),t.Q6J("ngIf",null==r.paid.errors?null:r.paid.errors.required),t.xp6(1),t.Q6J("ngIf",r.paid.hasError("exceed")),t.xp6(2),t.Q6J("disabled",!r.Form.valid||r.isSubmitting),t.xp6(1),t.Oqu(r.isSubmitting?t.lcZ(30,9,"button.wait"):t.lcZ(31,11,"button.save")),t.xp6(4),t.Oqu(t.lcZ(34,13,"button.back")))},dependencies:[e._Y,e.Fj,e.wV,e.JJ,e.JL,e.sg,e.u,g.O5,u.xY,s.KE,s.hX,s.TO,f.Nt,h.lW,E.X$],styles:["mat-card[_ngcontent-%COMP%]{width:20%}[_nghost-%COMP%]{height:100%;display:flex;justify-content:center;vertical-align:middle;align-items:center}  datepicker-value-example .mat-form-field-label{color:#f84bb3}  .mat-datepicker-toggle{color:#fad}  .mat-form-field-underline{color:#fad}"]})}}]);