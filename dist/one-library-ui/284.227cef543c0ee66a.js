"use strict";(self.webpackChunkOneLibraryUI=self.webpackChunkOneLibraryUI||[]).push([[284],{8284:(G,A,r)=>{r.r(A),r.d(A,{MaterialModule:()=>d});var C=r(6895),F=r(1697),a=r(4006),T=r(7110),g=r(208),c=r(1390),t=r(4650);class h{constructor(){}ngOnInit(){}}h.\u0275fac=function(e){return new(e||h)},h.\u0275cmp=t.Xpm({type:h,selectors:[["app-material"]],decls:1,vars:0,template:function(e,n){1&e&&t._UZ(0,"router-outlet")},dependencies:[c.lC]});var y=r(5412),D=r(7185),U=r(2893);class p{constructor(e,n,o){this._material=e,this.dialog=n,this.toastr=o,this.subscriptions=[],this.handleDelete=l=>this.subscriptions.push(this._material.delete(l).subscribe(()=>this.getAll()))}ngOnInit(){this.tableColumns=[{columnDef:"id",header:"#",cell:e=>e.id},{columnDef:"Name",header:"\u0627\u0644\u0623\u0633\u0645",cell:e=>e.name},{columnDef:"price",header:"\u0633\u0639\u0631 \u0627\u0644\u062c\u0645\u0644\u0629",cell:e=>e.price},{columnDef:"CurrentQty",header:"\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u062d\u0627\u0644\u064a\u0629",cell:e=>e.quantity}],this.getAll()}getAll(){this.loading=!0,this.subscriptions.push(this._material.getAll().subscribe({next:e=>{this.tableData=e},error:e=>{this.toastr.error(e.message,"\u0644\u0627\u064a\u0645\u0643\u0646 \u062a\u062d\u0645\u064a\u0644 \u0627\u0628\u064a\u0627\u0646\u0627\u062a "),this.loading=!1},complete:()=>{this.loading=!1}}))}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}}p.\u0275fac=function(e){return new(e||p)(t.Y36(g.U),t.Y36(y.uw),t.Y36(D._W))},p.\u0275cmp=t.Xpm({type:p,selectors:[["app-all"]],decls:1,vars:3,consts:[["dialogHeader","\u062d\u0630\u0641 \u0627\u0644\u062e\u0627\u0645\u0629","dialogDisplayName","name",3,"loading","tableColumns","tableData","OnDelete"]],template:function(e,n){1&e&&(t.TgZ(0,"app-table",0),t.NdJ("OnDelete",function(l){return n.handleDelete(l)}),t.qZA()),2&e&&t.Q6J("loading",n.loading)("tableColumns",n.tableColumns)("tableData",n.tableData)},dependencies:[U.a]});var b=r(9549),I=r(4144),E=r(4859);function M(i,e){1&i&&(t.TgZ(0,"h2",14),t._uU(1,"\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u062e\u0627\u0645\u0627\u062a"),t.qZA())}function N(i,e){1&i&&(t.TgZ(0,"h2",14),t._uU(1,"\u062e\u0627\u0645\u0627\u062a \u062c\u062f\u064a\u062f\u0629"),t.qZA())}function O(i,e){1&i&&(t.TgZ(0,"mat-error"),t._uU(1," Name is "),t.TgZ(2,"strong"),t._uU(3,"required"),t.qZA()())}function S(i,e){1&i&&(t.TgZ(0,"mat-error"),t._uU(1," price is "),t.TgZ(2,"strong"),t._uU(3,"required"),t.qZA()())}class u{constructor(e,n,o,l){this.router=e,this.route=n,this._material=o,this.fb=l,this.subscriptions=[],this.controllerName="materials",this.isSubmitted=!1,this.getSingle=v=>this.subscriptions.push(this._material.getOne(v).subscribe(f=>{console.log(f),this.Form.patchValue(f)})),this.back=()=>this.router.navigate([this.controllerName]),this.Form=this.fb.group({id:[null],name:["",[a.kI.required,a.kI.maxLength(100)]],price:[null,[a.kI.required]]})}get id(){return this.Form.get("id")}get name(){return this.Form.get("name")}get price(){return this.Form.get("price")}ngOnInit(){this.subscriptions.push(this.route.queryParams.subscribe(e=>{this.id.setValue(e.id),this.id&&this.getSingle(this.id.value)}))}handleSubmit(){this.Form.valid&&this.subscriptions.push(this.id.value?this._material.update(this.id.value,this.Form.value).subscribe(()=>{this.isSubmitted=!0,this.back()}):this._material.add(this.Form.value).subscribe(()=>{this.isSubmitted=!0,this.back()}))}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}}u.\u0275fac=function(e){return new(e||u)(t.Y36(c.F0),t.Y36(c.gz),t.Y36(g.U),t.Y36(a.qu))},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-add-edit"]],decls:23,vars:6,consts:[["class","w-100 text-center mt-3",4,"ngIf","ngIfElse"],["update",""],[1,"container","d-flex","justify-content-center"],[1,"d-flex","flex-column","w-50",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-8"],[1,"w-100"],["matInput","","formControlName","name"],[4,"ngIf"],[1,"col-4"],["matInput","","type","number","formControlName","price"],[1,"my-2","d-flex","flex-row-reverse"],["mat-flat-button","","color","warn",1,"mx-2","px-4",3,"disabled"],["type","button","mat-stroked-button","","color","basic",3,"click"],[1,"w-100","text-center","mt-3"]],template:function(e,n){if(1&e&&(t.YNc(0,M,2,0,"h2",0),t.YNc(1,N,2,0,"ng-template",null,1,t.W1O),t.TgZ(3,"section",2)(4,"form",3),t.NdJ("ngSubmit",function(){return n.handleSubmit()}),t.TgZ(5,"div",4)(6,"div",5)(7,"mat-form-field",6)(8,"mat-label"),t._uU(9,"\u0627\u0644\u0623\u0633\u0645"),t.qZA(),t._UZ(10,"input",7),t.YNc(11,O,4,0,"mat-error",8),t.qZA()(),t.TgZ(12,"div",9)(13,"mat-form-field",6)(14,"mat-label"),t._uU(15,"\u0633\u0639\u0631 \u0627\u0644\u062c\u0645\u0644\u0629"),t.qZA(),t._UZ(16,"input",10),t.YNc(17,S,4,0,"mat-error",8),t.qZA()()(),t.TgZ(18,"div",11)(19,"button",12),t._uU(20,"\u062d\u0641\u0638"),t.qZA(),t.TgZ(21,"button",13),t.NdJ("click",function(){return n.back()}),t._uU(22,"\u0631\u062c\u0648\u0639"),t.qZA()()()()),2&e){const o=t.MAs(2);t.Q6J("ngIf",n.id.value)("ngIfElse",o),t.xp6(4),t.Q6J("formGroup",n.Form),t.xp6(7),t.Q6J("ngIf",null==n.name.errors?null:n.name.errors.required),t.xp6(6),t.Q6J("ngIf",null==n.price.errors?null:n.price.errors.required),t.xp6(2),t.s9C("disabled",!n.Form.valid)}},dependencies:[a._Y,a.Fj,a.wV,a.JJ,a.JL,a.sg,a.u,C.O5,b.KE,b.hX,b.TO,I.Nt,E.lW]});var J=r(5861),Y=r(7957);class s{constructor(e){this.dialog=e}canDeactivate(e){var n=this;return(0,J.Z)(function*(){return!!(e.Form.touched&&e.Form.dirty&&e.isSubmitted||e.Form.untouched)||(yield new Promise((l,v)=>{n.dialog.closeAll(),n.dialog.open(Y.a,{disableClose:!0,data:{location:"\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u062a\u0639\u062f\u064a\u0644\u0627\u062a",msg:"\u0644\u0642\u062f \u0642\u0645\u062a \u0628\u062a\u0639\u062f\u064a\u0644 \u0628\u0639\u0636 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0648\u0644\u0645 \u062a\u0642\u0645 \u0628\u062d\u0641\u0638\u0647\u0627,\u0647\u0644 \u0627\u0646\u062a \u0645\u062a\u0627\u0643\u062f \u0645\u0646 \u0645\u063a\u0627\u062f\u0631\u0629 \u0627\u0644\u0635\u0641\u062d\u0629"}}).afterClosed().subscribe({next:f=>l(f),error:f=>v()})}))})()}}s.\u0275fac=function(e){return new(e||s)(t.LFG(y.uw))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac});var Z=r(6578);const x=[{path:"",component:h,title:"\u0627\u0644\u062e\u0627\u0645\u0627\u062a",canActivateChild:[Z.i],children:[{path:"all",component:p,title:"\u062c\u0645\u064a\u0639 \u0627\u0644\u062e\u0627\u0645\u0627\u062a"},{path:"new",component:u,title:"\u0627\u0636\u0627\u0641\u0629 \u062e\u0627\u0645\u0629 \u062c\u062f\u064a\u062f\u0629",canDeactivate:[s]},{path:"edit",component:u,title:"\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u062e\u0627\u0645\u0627\u062a",canDeactivate:[s]},{path:"",redirectTo:"all",pathMatch:"full"}]}];class m{}m.\u0275fac=function(e){return new(e||m)},m.\u0275mod=t.oAB({type:m}),m.\u0275inj=t.cJS({imports:[c.Bz.forChild(x),c.Bz]});class d{}d.\u0275fac=function(e){return new(e||d)},d.\u0275mod=t.oAB({type:d}),d.\u0275inj=t.cJS({providers:[Z.i,g.U,s],imports:[a.u5,a.UX,C.ez,m,F.I,T.SharedModule]})}}]);