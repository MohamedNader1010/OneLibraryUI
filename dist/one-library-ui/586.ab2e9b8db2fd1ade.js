"use strict";(self.webpackChunkOneLibraryUI=self.webpackChunkOneLibraryUI||[]).push([[586],{1586:(gt,x,i)=>{i.r(x),i.d(x,{NoteModule:()=>p});var f=i(6895),C=i(4006),S=i(8019),E=i(8890),N=i(1390),_=i(5861),M=i(7014),P=i(9017),J=i(1207),O=i(5249),w=i(7974),h=i(6308),Q=i(2340),v=i(3120),s=i(7340),Y=i(4968),t=i(4650),R=i(9383),H=i(5412),T=i(4467),F=i(7185),U=i(529),b=i(6338),I=i(4850),D=i(9549),k=i(7392),$=i(4144),B=i(1572),m=i(671),G=i(4859);const z=["filter"];function K(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(n);const l=t.oxw();return t.KtG(l.clearFilter())}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function j(o,e){if(1&o&&(t.TgZ(0,"th",22),t._uU(1),t.qZA()),2&o){const n=t.oxw().$implicit;t.xp6(1),t.Oqu(n.header)}}function W(o,e){if(1&o&&(t.TgZ(0,"td",23),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const n=e.$implicit,a=t.oxw().$implicit;t.xp6(1),t.Oqu(a.columnDef.indexOf("createdOn")>=0?t.xi3(2,1,a.cell(n),"dd/MM/yyyy"):a.cell(n))}}function L(o,e){if(1&o&&(t.ynx(0,20),t.YNc(1,j,2,1,"th",21),t.YNc(2,W,3,4,"td",11),t.BQk()),2&o){const a=e.first,l=e.last;t.Q6J("matColumnDef",e.$implicit.columnDef)("sticky",a||l)}}function X(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"th",24)(1,"button",25),t.NdJ("click",function(l){t.CHM(n);const c=t.oxw();return t.KtG(c.HandleNew(l))}),t.TgZ(2,"mat-icon",26),t._uU(3,"add"),t.qZA()()()}}function V(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(l){t.CHM(n);const c=t.oxw().$implicit,r=t.oxw();return t.KtG(r.handleViewPdf(c,l))}),t.TgZ(1,"mat-icon"),t._uU(2,"open_in_new"),t.qZA()()}}function q(o,e){1&o&&(t.TgZ(0,"mat-icon"),t._uU(1,"keyboard_arrow_down"),t.qZA())}function tt(o,e){1&o&&(t.TgZ(0,"mat-icon"),t._uU(1,"keyboard_arrow_up"),t.qZA())}function et(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(l){t.CHM(n);const c=t.oxw().$implicit,r=t.oxw();return r.expandedElement=r.expandedElement===c?null:c,t.KtG(l.stopPropagation())}),t.YNc(1,q,2,0,"mat-icon",32),t.YNc(2,tt,2,0,"mat-icon",32),t.qZA()}if(2&o){const n=t.oxw().$implicit,a=t.oxw();t.xp6(1),t.Q6J("ngIf",a.expandedElement!==n),t.xp6(1),t.Q6J("ngIf",a.expandedElement===n)}}function nt(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"td",23)(1,"button",27),t.NdJ("click",function(l){const r=t.CHM(n).$implicit,g=t.oxw();return t.KtG(g.handleEdit(r,l))}),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()(),t.YNc(4,V,3,0,"button",28),t.YNc(5,et,3,2,"button",29),t.qZA()}if(2&o){const n=e.$implicit;t.xp6(4),t.Q6J("ngIf",n.filePath),t.xp6(1),t.Q6J("ngIf",n.noteClients.length>0)}}function ot(o,e){1&o&&t._UZ(0,"mat-divider")}function at(o,e){if(1&o&&(t.TgZ(0,"mat-list")(1,"mat-list-item"),t._uU(2),t.qZA(),t.YNc(3,ot,1,0,"mat-divider",32),t.qZA()),2&o){const n=e.$implicit,a=e.last;t.xp6(2),t.AsE("\u0623\u0633\u0645 \u0627\u0644\u0639\u0645\u064a\u0644 : ",n.name," - \u0627\u0644\u0643\u0645\u064a\u0629 : ",n.quantity,""),t.xp6(1),t.Q6J("ngIf",!a)}}function it(o,e){if(1&o&&(t.TgZ(0,"td",23)(1,"div",33),t.YNc(2,at,4,3,"mat-list",34),t.qZA()()),2&o){const n=e.$implicit,a=t.oxw();t.uIk("colspan",a.columnsToDisplayWithExpand.length),t.xp6(1),t.Q6J("@detailExpand",n==a.expandedElement?"expanded":"collapsed"),t.xp6(1),t.Q6J("ngForOf",n.noteClients)}}function lt(o,e){1&o&&t._UZ(0,"tr",35)}function ct(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"tr",36),t.NdJ("click",function(){const c=t.CHM(n).$implicit,r=t.oxw();return t.KtG(r.expandedElement=r.expandedElement===c?null:c)}),t.qZA()}if(2&o){const n=e.$implicit,a=t.oxw();t.ekj("example-expanded-row",a.expandedElement===n)}}function rt(o,e){1&o&&t._UZ(0,"tr",37)}function mt(o,e){if(1&o&&(t.ynx(0),t.TgZ(1,"td",39),t._UZ(2,"mat-spinner",40),t.qZA(),t.BQk()),2&o){const n=t.oxw(2);t.xp6(1),t.Q6J("colSpan",n.displayedColumns.length)}}function st(o,e){if(1&o&&(t.ynx(0),t.TgZ(1,"td",39),t._uU(2,"No data found"),t.qZA(),t.BQk()),2&o){const n=t.oxw(2);t.xp6(1),t.Q6J("colSpan",n.displayedColumns.length)}}function dt(o,e){if(1&o&&(t.TgZ(0,"tr",38),t.YNc(1,mt,3,1,"ng-container",32),t.YNc(2,st,3,1,"ng-container",32),t.qZA()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.database.isLoading),t.xp6(1),t.Q6J("ngIf",!n.database.isLoading)}}const pt=function(){return["expandedDetail"]},ut=function(){return[25,50,100]};class u extends J.D{constructor(e,n,a,l,c){super(c,l,a),this.translate=e,this.dialog=n,this.database=a,this.toastr=l,this.httpClient=c,this.formName=P.j.NoteFormDialogComponent,this.componentName=M.N.note,this.activeSortColumn="id",this.handleViewPdf=(r,g)=>{g.stopPropagation();const y=r.filePath,A=y.indexOf("uploads");if(-1!==A){const ht=y.substring(A);window.open(`${Q.N.host}${ht}`,"_blank")}},this.refreshTable=()=>this.paginator._changePageSize(this.paginator.pageSize),this.clearFilter=()=>this.dataSource.filter=this.filter.nativeElement.value=""}ngOnInit(){this.initiateTableHeaders(),this.loadData()}initiateTableHeaders(){this.tableColumns=[{columnDef:this.translate.instant("table.id"),header:this.translate.instant("table.id.label"),cell:e=>e.id},{columnDef:"name",header:"\u0627\u0644\u0623\u0633\u0645",cell:e=>e.name},{columnDef:"teacher",header:"\u0627\u0644\u0645\u062f\u0631\u0633",cell:e=>e.client},{columnDef:"stage",header:"\u0627\u0644\u0645\u0631\u062d\u0644\u0629",cell:e=>e.stage??"-"},{columnDef:"term",header:"\u0627\u0644\u062a\u0631\u0645",cell:e=>e.term??"-"},{columnDef:"actualPrice",header:"\u0627\u0644\u0633\u0639\u0631 \u0627\u0644\u0641\u0639\u0644\u064a",cell:e=>e.actualPrice},{columnDef:"originalPrice",header:"\u0633\u0639\u0631 \u0627\u0644\u062a\u0643\u0644\u0641\u0629",cell:e=>e.originalPrice},{columnDef:"earning",header:"\u0627\u0644\u0631\u0628\u062d",cell:e=>e.earning},{columnDef:"teacherPrice",header:"\u0631\u0628\u062d \u0627\u0644\u0645\u062f\u0631\u0633",cell:e=>e.teacherPrice},{columnDef:"finalPrice",header:"\u0627\u0644\u0633\u0639\u0631 \u0627\u0644\u0646\u0647\u0627\u0626\u064a",cell:e=>e.finalPrice},{columnDef:"quantity",header:"\u0627\u0644\u0643\u0645\u064a\u0629",cell:e=>e.quantity},{columnDef:"pdf",header:"pdf",cell:e=>e.fileName??"-"}]}loadData(){this.initiateTableHeaders(),this.displayedColumns=[...this.tableColumns.map(e=>e.columnDef)],this.columnsToDisplayWithExpand=[...this.displayedColumns,"expand"],this.dataSource=new O.G(this.database,this.paginator,this.sort),this.subscriptions.push((0,Y.R)(this.filter.nativeElement,"keyup").subscribe(()=>{this.dataSource&&(this.dataSource.filter=this.filter.nativeElement.value)})),this.database.getAllNotes()}HandleNew(e){var n=this;return(0,_.Z)(function*(){e.stopPropagation();const a=yield v.f.getAppropriateDialogComponent(n.formName),l=n.dialog.open(a,{minWidth:"30%"});n.subscriptions.push(l.afterClosed().subscribe({next:c=>{c?.data&&n.handleNewRow(c.data.message)},complete:()=>n.refreshTable()}))})()}handleEdit(e,n){var a=this;return(0,_.Z)(function*(){n.stopPropagation();const l=yield v.f.getAppropriateDialogComponent(a.formName),c=a.dialog.open(l,{data:e});a.subscriptions.push(c.afterClosed().subscribe({next:r=>{r?.data&&a.handleEditRow(r.data)},complete:()=>a.refreshTable()}))})()}setActiveSortColumn(e){this.activeSortColumn=e}}u.\u0275fac=function(e){return new(e||u)(t.Y36(R.sK),t.Y36(H.uw),t.Y36(T.Y),t.Y36(F._W),t.Y36(U.eN))},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-note"]],viewQuery:function(e,n){if(1&e&&(t.Gf(w.NW,7),t.Gf(h.YE,7),t.Gf(z,7)),2&e){let a;t.iGM(a=t.CRH())&&(n.paginator=a.first),t.iGM(a=t.CRH())&&(n.sort=a.first),t.iGM(a=t.CRH())&&(n.filter=a.first)}},features:[t.qOj],decls:20,vars:14,consts:[[1,"container-fluid","d-flex","flex-column","py-2","h-100"],[1,"d-flex","align-items-center","justify-content-between","mat-elevation-z2"],["floatPlaceholder","never","color","warn",1,"w-100",2,"background-color","white"],["matInput","","placeholder","Filter"],["filter",""],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"flex-grow-1","mat-elevation-z2","w-100","overflow-auto"],["tabindex","0","mat-table","","multiTemplateDataRows","","matSort","","recycleRows","","matSortDirection","desc",2,"background-color","white",3,"dataSource","matSortActive"],[3,"matColumnDef","sticky",4,"ngFor","ngForOf"],["matColumnDef","expand",3,"sticky"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","expandedDetail"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","","class","example-element-row",3,"example-expanded-row","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","example-detail-row",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","color","warn",1,"d-flex",3,"pageSizeOptions","pageSize","length"],["paginator",""],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"matColumnDef","sticky"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-icon-button","","color","basic",3,"click"],["aria-label","new item"],["mat-icon-button","","matTooltip","edit","color","basic","aria-label","Edit selected row",3,"click"],["mat-icon-button","","matTooltip","open","color","basic","aria-label","view certificate",3,"click",4,"ngIf"],["mat-icon-button","","aria-label","expand row",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","open","color","basic","aria-label","view certificate",3,"click"],["mat-icon-button","","aria-label","expand row",3,"click"],[4,"ngIf"],[1,"example-element-detail"],[4,"ngFor","ngForOf"],["mat-header-row",""],["mat-row","",1,"example-element-row",3,"click"],["mat-row","",1,"example-detail-row"],[1,"mat-row"],[1,"mat-cell","text-center",3,"colSpan"],["color","warn",1,"mx-auto","mt-5"]],template:function(e,n){if(1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"mat-form-field",2),t._UZ(3,"input",3,4),t.YNc(5,K,3,0,"button",5),t.qZA()(),t.TgZ(6,"div",6)(7,"table",7),t.YNc(8,L,3,2,"ng-container",8),t.ynx(9,9),t.YNc(10,X,4,0,"th",10),t.YNc(11,nt,6,2,"td",11),t.BQk(),t.ynx(12,12),t.YNc(13,it,3,3,"td",11),t.BQk(),t.YNc(14,lt,1,0,"tr",13),t.YNc(15,ct,1,2,"tr",14),t.YNc(16,rt,1,0,"tr",15),t.YNc(17,dt,3,2,"tr",16),t.qZA()(),t._UZ(18,"mat-paginator",17,18),t.qZA()),2&e){const a=t.MAs(4);t.xp6(5),t.Q6J("ngIf",a.value),t.xp6(2),t.Q6J("dataSource",n.dataSource)("matSortActive",n.activeSortColumn),t.xp6(1),t.Q6J("ngForOf",n.tableColumns),t.xp6(1),t.Q6J("sticky",!0),t.xp6(5),t.Q6J("matHeaderRowDef",n.columnsToDisplayWithExpand)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",n.columnsToDisplayWithExpand),t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(12,pt)),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(13,ut))("pageSize",25)("length",n.dataSource.filteredData.length)}},dependencies:[f.sg,f.O5,b.i$,b.Tg,I.d,D.KE,D.R9,k.Hw,$.Nt,w.NW,B.Ou,m.BZ,m.AE,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,m.Ee,h.YE,h.nU,G.RK,f.uU],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-column-id[_ngcontent-%COMP%]{width:100px;text-align:left}.mat-mdc-header-cell[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;white-space:nowrap;min-width:100px}.mat-mdc-row[_ngcontent-%COMP%]{white-space:nowrap}.mat-column-expand[_ngcontent-%COMP%]{width:150px;text-align:right}tr.example-detail-row[_ngcontent-%COMP%]{height:0}.mat-expansion-panel-header[_ngcontent-%COMP%]:hover{background-color:#a3a1a1}.example-element-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0}.example-element-detail[_ngcontent-%COMP%]{overflow:hidden}"],data:{animation:[(0,s.X$)("detailExpand",[(0,s.SB)("collapsed",(0,s.oB)({height:"0px",minHeight:"0"})),(0,s.SB)("expanded",(0,s.oB)({height:"*"})),(0,s.eR)("expanded <=> collapsed",(0,s.jt)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}});var Z=i(6578);const ft=[{path:"",component:u,title:"\u0627\u0644\u0645\u0630\u0643\u0631\u0627\u062a",canActivateChild:[Z.i]}];class d{}d.\u0275fac=function(e){return new(e||d)},d.\u0275mod=t.oAB({type:d}),d.\u0275inj=t.cJS({imports:[N.Bz.forChild(ft),N.Bz]});class p{}p.\u0275fac=function(e){return new(e||p)},p.\u0275mod=t.oAB({type:p}),p.\u0275inj=t.cJS({providers:[Z.i,T.Y],imports:[C.u5,C.UX,f.ez,d,E.SharedModule,S.I]})}}]);