"use strict";(self.webpackChunkOneLibraryUI=self.webpackChunkOneLibraryUI||[]).push([[118],{7118:(R,T,o)=>{o.r(T),o.d(T,{ClientModule:()=>d});var A=o(6895),s=o(4006),Z=o(6578),I=o(1697),N=o(7110),S=o(5861),U=o(7957),t=o(4650),y=o(5412);class l{constructor(e){this.dialog=e}canDeactivate(e){var n=this;return(0,S.Z)(function*(){return!!(e.Form.touched&&e.Form.dirty&&e.isSubmitted||e.Form.untouched)||(yield new Promise((a,F)=>{n.dialog.closeAll(),n.dialog.open(U.a,{disableClose:!0,data:{location:"\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u062a\u0639\u062f\u064a\u0644\u0627\u062a",msg:"\u0644\u0642\u062f \u0642\u0645\u062a \u0628\u062a\u0639\u062f\u064a\u0644 \u0628\u0639\u0636 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0648\u0644\u0645 \u062a\u0642\u0645 \u0628\u062d\u0641\u0638\u0647\u0627,\u0647\u0644 \u0627\u0646\u062a \u0645\u062a\u0627\u0643\u062f \u0645\u0646 \u0645\u063a\u0627\u062f\u0631\u0629 \u0627\u0644\u0635\u0641\u062d\u0629"}}).afterClosed().subscribe({next:v=>a(v)})}))})()}}l.\u0275fac=function(e){return new(e||l)(t.LFG(y.uw))},l.\u0275prov=t.Yz7({token:l,factory:l.\u0275fac});var u=o(1390);class p{constructor(){}ngOnInit(){}}p.\u0275fac=function(e){return new(e||p)},p.\u0275cmp=t.Xpm({type:p,selectors:[["app-client"]],decls:1,vars:0,template:function(e,n){1&e&&t._UZ(0,"router-outlet")},dependencies:[u.lC]});var D=o(7185),b=o(9648),Y=o(8653),C=o(9549),O=o(7392),E=o(4144),J=o(4385),x=o(3238),q=o(4859);function Q(i,e){1&i&&(t.TgZ(0,"h2",17),t._uU(1,"\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0639\u0645\u064a\u0644"),t.qZA())}function M(i,e){1&i&&(t.TgZ(0,"h2",17),t._uU(1,"\u0639\u0645\u064a\u0644 \u062c\u062f\u064a\u062f"),t.qZA())}function z(i,e){1&i&&(t.TgZ(0,"mat-error"),t._uU(1," Name is "),t.TgZ(2,"strong"),t._uU(3,"required"),t.qZA()())}function G(i,e){1&i&&(t.TgZ(0,"mat-error"),t._uU(1," Please enter a valid phone number "),t.qZA())}function X(i,e){1&i&&(t.TgZ(0,"mat-error"),t._uU(1," phone number is "),t.TgZ(2,"strong"),t._uU(3,"required"),t.qZA()())}function j(i,e){if(1&i&&(t.TgZ(0,"mat-option",18),t._uU(1),t.qZA()),2&i){const n=e.$implicit;t.Q6J("value",n.id),t.xp6(1),t.Oqu(n.name)}}function L(i,e){1&i&&(t.TgZ(0,"mat-error"),t._uU(1," client type is "),t.TgZ(2,"strong"),t._uU(3,"required"),t.qZA()())}class c{constructor(e,n,r,a,F,v){this.router=e,this.toastr=n,this.route=r,this._client=a,this._clientType=F,this.fb=v,this.subscriptions=[],this.controllerName="clients",this.isSubmitted=!1,this.ClientTypeDataSource=[],this.getAllClientTypes=()=>this.subscriptions.push(this._clientType.getAll().subscribe({next:g=>{this.ClientTypeDataSource=g},error:g=>{this.toastr.error(g.message,"\u0644\u0627\u064a\u0645\u0643\u0646 \u062a\u062d\u0645\u064a\u0644 \u0627\u0628\u064a\u0627\u0646\u0627\u062a ")}})),this.getSingle=g=>this.subscriptions.push(this._client.getOne(g).subscribe(W=>this.Form.patchValue(W))),this.back=()=>this.router.navigate([this.controllerName]),this.Form=this.fb.group({name:["",[s.kI.required,s.kI.maxLength(100)]],phoneNumber:["",[s.kI.required,s.kI.pattern("01[0125][0-9]{8}")]],clientTypeId:["",[s.kI.required]]})}get name(){return this.Form.get("name")}get phone(){return this.Form.get("phoneNumber")}get clientTypeId(){return this.Form.get("clientTypeId")}ngOnInit(){this.getAllClientTypes(),this.subscriptions.push(this.route.queryParams.subscribe(e=>this.id=e.id)),this.id&&this.getSingle(this.id)}handleSubmit(){this.Form.valid&&this.subscriptions.push(this.id?this._client.update(this.id,this.Form.value).subscribe(()=>{this.isSubmitted=!0,this.back()}):this._client.add(this.Form.value).subscribe(()=>{this.isSubmitted=!0,this.back()}))}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}}c.\u0275fac=function(e){return new(e||c)(t.Y36(u.F0),t.Y36(D._W),t.Y36(u.gz),t.Y36(b.y),t.Y36(Y.q),t.Y36(s.qu))},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-add-edit"]],decls:34,vars:9,consts:[["class","w-100 text-center mt-3",4,"ngIf","ngIfElse"],["update",""],[1,"container","d-flex","justify-content-center"],[1,"d-flex","flex-column","w-50",3,"formGroup","ngSubmit"],[1,"row"],[1,"col"],[1,"w-100"],["matInput","","formControlName","name"],[4,"ngIf"],["appearance","fill",1,"w-100"],["type","tel","matInput","","formControlName","phoneNumber"],["matSuffix",""],["formControlName","clientTypeId"],[3,"value",4,"ngFor","ngForOf"],[1,"my-2","d-flex","flex-row-reverse"],["mat-flat-button","","color","warn",1,"mx-2","px-4",3,"disabled"],["type","button","mat-stroked-button","","color","basic",3,"click"],[1,"w-100","text-center","mt-3"],[3,"value"]],template:function(e,n){if(1&e&&(t.YNc(0,Q,2,0,"h2",0),t.YNc(1,M,2,0,"ng-template",null,1,t.W1O),t.TgZ(3,"section",2)(4,"form",3),t.NdJ("ngSubmit",function(){return n.handleSubmit()}),t.TgZ(5,"div",4)(6,"div",5)(7,"mat-form-field",6)(8,"mat-label"),t._uU(9,"\u0627\u0644\u0623\u0633\u0645"),t.qZA(),t._UZ(10,"input",7),t.YNc(11,z,4,0,"mat-error",8),t.qZA()()(),t.TgZ(12,"div",4)(13,"div",5)(14,"mat-form-field",9)(15,"mat-label"),t._uU(16,"\u0631\u0642\u0645 \u0627\u0644\u062a\u0644\u0641\u0648\u0646"),t.qZA(),t._UZ(17,"input",10),t.TgZ(18,"mat-icon",11),t._uU(19,"phone"),t.qZA(),t.YNc(20,G,2,0,"mat-error",8),t.YNc(21,X,4,0,"mat-error",8),t.qZA()(),t.TgZ(22,"div",5)(23,"mat-form-field",9)(24,"mat-label"),t._uU(25,"\u0627\u0644\u0646\u0648\u0639"),t.qZA(),t.TgZ(26,"mat-select",12),t.YNc(27,j,2,2,"mat-option",13),t.qZA(),t.YNc(28,L,4,0,"mat-error",8),t.qZA()()(),t.TgZ(29,"div",14)(30,"button",15),t._uU(31,"\u062d\u0641\u0638"),t.qZA(),t.TgZ(32,"button",16),t.NdJ("click",function(){return n.back()}),t._uU(33,"\u0631\u062c\u0648\u0639"),t.qZA()()()()),2&e){const r=t.MAs(2);t.Q6J("ngIf",n.id)("ngIfElse",r),t.xp6(4),t.Q6J("formGroup",n.Form),t.xp6(7),t.Q6J("ngIf",null==n.name.errors?null:n.name.errors.required),t.xp6(9),t.Q6J("ngIf",(null==n.phone.errors?null:n.phone.errors.pattern)&&!(null!=n.phone.errors&&n.phone.errors.required)),t.xp6(1),t.Q6J("ngIf",null==n.phone.errors?null:n.phone.errors.required),t.xp6(6),t.Q6J("ngForOf",n.ClientTypeDataSource),t.xp6(1),t.Q6J("ngIf",null==n.clientTypeId.errors?null:n.clientTypeId.errors.required),t.xp6(2),t.s9C("disabled",!n.Form.valid)}},dependencies:[s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,A.sg,A.O5,C.KE,C.hX,C.TO,C.R9,O.Hw,E.Nt,J.gD,x.ey,q.lW]});var P=o(2893);class h{constructor(e,n,r){this._client=e,this.dialog=n,this.toastr=r,this.subscriptions=[],this.handleDelete=a=>this.subscriptions.push(this._client.delete(a).subscribe(()=>this.getAll()))}ngOnInit(){this.tableColumns=[{columnDef:"id",header:"#",cell:e=>e.id},{columnDef:"Name",header:"\u0627\u0644\u0623\u0633\u0645",cell:e=>e.name},{columnDef:"PhoneNumber",header:"\u0631\u0642\u0645 \u0627\u0644\u062a\u0644\u064a\u0641\u0648\u0646",cell:e=>e.phoneNumber},{columnDef:"type",header:"\u0627\u0644\u0646\u0648\u0639",cell:e=>e.clientType},{columnDef:"total",header:"\u0627\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u062a\u0639\u0627\u0645\u0644\u0627\u062a",cell:e=>e.total},{columnDef:"paid",header:"\u0642\u0627\u0645 \u0628\u062f\u0641\u0639",cell:e=>e.paid},{columnDef:"rset",header:"\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u062a\u0628\u0642\u064a",cell:e=>e.rest}],this.getAll()}getAll(){this.loading=!0,this.subscriptions.push(this._client.getAll().subscribe({next:e=>{this.tableData=e},error:e=>{this.toastr.error(e.message,"\u0644\u0627\u064a\u0645\u0643\u0646 \u062a\u062d\u0645\u064a\u0644 \u0627\u0628\u064a\u0627\u0646\u0627\u062a "),this.loading=!1},complete:()=>{this.loading=!1}}))}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}}h.\u0275fac=function(e){return new(e||h)(t.Y36(b.y),t.Y36(y.uw),t.Y36(D._W))},h.\u0275cmp=t.Xpm({type:h,selectors:[["app-all"]],decls:1,vars:3,consts:[["dialogHeader","\u062d\u0630\u0641 \u0627\u0644\u0639\u0645\u064a\u0644","dialogDisplayName","name",3,"loading","tableColumns","tableData","OnDelete"]],template:function(e,n){1&e&&(t.TgZ(0,"app-table",0),t.NdJ("OnDelete",function(a){return n.handleDelete(a)}),t.qZA()),2&e&&t.Q6J("loading",n.loading)("tableColumns",n.tableColumns)("tableData",n.tableData)},dependencies:[P.a]});class f{constructor(e,n,r){this.route=e,this._client=n,this.dialog=r,this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.route.queryParams.subscribe(e=>this.id=e.id)),this.id&&this.getSingle()}getSingle(){this.loading=!0,this.subscriptions.push(this._client.getOne(this.id).subscribe({next:e=>{this.client=e},error:()=>this.loading=!1,complete:()=>this.loading=!1}))}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}}f.\u0275fac=function(e){return new(e||f)(t.Y36(u.gz),t.Y36(b.y),t.Y36(y.uw))},f.\u0275cmp=t.Xpm({type:f,selectors:[["app-single"]],decls:1,vars:0,template:function(e,n){1&e&&t._uU(0,"single client")}});const B=[{path:"",component:p,title:"\u0627\u0644\u0639\u0645\u0644\u0627\u0621",canActivateChild:[Z.i],children:[{path:"all",component:h,title:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0639\u0645\u0644\u0627\u0621"},{path:"new",component:c,title:"\u0639\u0645\u064a\u0644 \u062c\u062f\u064a\u062f",canDeactivate:[l]},{path:"edit",component:c,title:"\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0639\u0645\u064a\u0644",canDeactivate:[l]},{path:"single",component:f,title:"\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644"},{path:"",redirectTo:"all",pathMatch:"full"}]}];class m{}m.\u0275fac=function(e){return new(e||m)},m.\u0275mod=t.oAB({type:m}),m.\u0275inj=t.cJS({imports:[u.Bz.forChild(B),u.Bz]});class d{}d.\u0275fac=function(e){return new(e||d)},d.\u0275mod=t.oAB({type:d}),d.\u0275inj=t.cJS({providers:[Z.i,b.y,l],imports:[s.u5,s.UX,A.ez,m,I.I,N.SharedModule]})}}]);