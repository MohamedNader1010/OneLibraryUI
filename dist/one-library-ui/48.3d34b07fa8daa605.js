"use strict";(self.webpackChunkOneLibraryUI=self.webpackChunkOneLibraryUI||[]).push([[48],{9048:(A,e,u)=>{u.r(e),u.d(e,{FormDialogComponent:()=>n});var s=u(5412),m=u(7163),t=u(4650),d=u(7753),i=u(4006),g=u(7185),f=u(9383),l=u(9549),h=u(4144),c=u(4859);class n{constructor(o,a,r,p,D,O){this.dialogRef=o,this.data=a,this._inOut=r,this.fb=p,this.toastr=D,this.translate=O,this.subscriptions=[],this.isSubmitting=!1,this.MaterialDataSource=[],this.ngOnDestroy=()=>this.subscriptions.forEach(b=>b.unsubscribe()),this.form=this.fb.group({status:[null],amount:[0],comment:[""]})}get amount(){return this.form.get("amount")}get materialId(){return this.form.get("materialId")}get status(){return this.form.get("status")}ngOnInit(){this.data&&this.form.patchValue(this.data)}onNoClick(){this.dialogRef.close()}handleSubmit(){this.form.valid&&(this.isSubmitting=!0,this.add())}add(){this.status.setValue(this.amount.value>0?m.o.\u0648\u0627\u0631\u062f:m.o.\u0635\u0627\u062f\u0631),this.subscriptions.push(this._inOut.add(this.form.value).subscribe({next:o=>{this._inOut.dialogData=o.body,this.dialogRef.close({data:o})},error:o=>{this.isSubmitting=!1,this.toastr.error((o.error??o).message)},complete:()=>{this.isSubmitting=!1}}))}}n.\u0275fac=function(o){return new(o||n)(t.Y36(s.so),t.Y36(s.WI),t.Y36(d.T),t.Y36(i.qu),t.Y36(g._W),t.Y36(f.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-form",8,"dialog"]],attrs:["class","dialog"],decls:22,vars:3,consts:[[1,"container"],["mat-dialog-title",""],[1,"d-flex","flex-column","mat-dialog-content",3,"formGroup","ngSubmit"],[1,"row"],[1,"col"],["appearance","fill","color","warn",1,"w-100"],["type","number","matInput","","formControlName","amount"],["type","text","matInput","","formControlName","comment"],[1,"my-2","d-flex","flex-row-reverse"],["mat-raised-button","","type","submit","color","warn",1,"mx-2","px-4",3,"disabled"],["type","button","mat-stroked-button","","color","warn","tabindex","-1",3,"click"]],template:function(o,a){1&o&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2,"\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u0645\u0635\u0627\u0631\u064a\u0641/\u0627\u0644\u0627\u064a\u0631\u0627\u062f\u0627\u062a"),t.qZA(),t.TgZ(3,"mat-dialog-content")(4,"form",2),t.NdJ("ngSubmit",function(){return a.handleSubmit()}),t.TgZ(5,"div",3)(6,"div",4)(7,"mat-form-field",5)(8,"mat-label"),t._uU(9,"\u0627\u0644\u0643\u0645\u064a\u0629"),t.qZA(),t._UZ(10,"input",6),t.qZA()()(),t.TgZ(11,"div",3)(12,"div",4)(13,"mat-form-field",5)(14,"mat-label"),t._uU(15,"\u0645\u0644\u0627\u062d\u0638\u0627\u062a"),t.qZA(),t._UZ(16,"input",7),t.qZA()()(),t.TgZ(17,"div",8)(18,"button",9),t._uU(19),t.qZA(),t.TgZ(20,"button",10),t.NdJ("click",function(){return a.onNoClick()}),t._uU(21,"\u0625\u0644\u063a\u0627\u0621"),t.qZA()()()()()),2&o&&(t.xp6(4),t.Q6J("formGroup",a.form),t.xp6(14),t.Q6J("disabled",!a.form.valid||a.isSubmitting),t.xp6(1),t.Oqu(a.isSubmitting?"\u0627\u0646\u062a\u0638\u0631 \u0645\u0646 \u0641\u0636\u0644\u0643":"\u062d\u0641\u0638"))},dependencies:[i._Y,i.Fj,i.wV,i.JJ,i.JL,i.sg,i.u,s.uh,s.xY,l.KE,l.hX,h.Nt,c.lW],styles:[".container[_ngcontent-%COMP%]{min-width:450px}"]})}}]);